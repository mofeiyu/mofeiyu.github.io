<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="kaggle," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="1. 问题泰坦尼克号与冰山相撞，2224名船员及乘客中，逾1500人丧生。本题是一个二分类问题，需要我们根据题目提供的部分游客信息和存活情况来预测什么样的人有可能在这次灾难中存活。">
<meta name="keywords" content="kaggle">
<meta property="og:type" content="article">
<meta property="og:title" content="Titanic Problem from Kaggel">
<meta property="og:url" content="mofeiyu.github.io/kaggle_titanic/index.html">
<meta property="og:site_name" content="mofeiyu">
<meta property="og:description" content="1. 问题泰坦尼克号与冰山相撞，2224名船员及乘客中，逾1500人丧生。本题是一个二分类问题，需要我们根据题目提供的部分游客信息和存活情况来预测什么样的人有可能在这次灾难中存活。">
<meta property="og:image" content="/img/kaggle/titanic/Figure1.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure2.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure3.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure4.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure5.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure6.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure2.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure8.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure9.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure10.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure11.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure12.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure13.png">
<meta property="og:image" content="/img/kaggle/titanic/Figure14.png">
<meta property="og:updated_time" content="2018-08-12T13:51:35.363Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Titanic Problem from Kaggel">
<meta name="twitter:description" content="1. 问题泰坦尼克号与冰山相撞，2224名船员及乘客中，逾1500人丧生。本题是一个二分类问题，需要我们根据题目提供的部分游客信息和存活情况来预测什么样的人有可能在这次灾难中存活。">
<meta name="twitter:image" content="/img/kaggle/titanic/Figure1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="mofeiyu.github.io/kaggle_titanic/"/>





  <title> Titanic Problem from Kaggel | mofeiyu </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">mofeiyu</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="mofeiyu.github.io/kaggle_titanic/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="mofeiyu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="mofeiyu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="mofeiyu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Titanic Problem from Kaggel
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-23T11:44:00+08:00">
                2018-07-23
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/kaggle_titanic/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="kaggle_titanic/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-问题"><a href="#1-问题" class="headerlink" title="1. 问题"></a>1. 问题</h2><p>泰坦尼克号与冰山相撞，2224名船员及乘客中，逾1500人丧生。本题是一个二分类问题，需要我们根据题目提供的部分游客信息和存活情况来预测什么样的人有可能在这次灾难中存活。</p>
<a id="more"></a>
<blockquote>
<p>Competition Description<br>The sinking of the RMS Titanic is one of the most infamous shipwrecks in history.  On April 15, 1912, during her maiden voyage, the Titanic sank after colliding with an iceberg, killing 1502 out of 2224 passengers and crew. This sensational tragedy shocked the international community and led to better safety regulations for ships.<br>One of the reasons that the shipwreck led to such loss of life was that there were not enough lifeboats for the passengers and crew. Although there was some element of luck involved in surviving the sinking, some groups of people were more likely to survive than others, such as women, children, and the upper-class.<br>In this challenge, we ask you to complete the analysis of what sorts of people were likely to survive. In particular, we ask you to apply the tools of machine learning to predict which passengers survived the tragedy.</p>
</blockquote>
<h2 id="2-数据"><a href="#2-数据" class="headerlink" title="2. 数据"></a>2. 数据</h2><p>注意下面对数据的处理都只写了在train或者test里面的处理，其实应该对train和test做一样的特征工程，后面我会封装好函数让它们过一样的流程。</p>
<h3 id="2-1-初识数据"><a href="#2-1-初识数据" class="headerlink" title="2.1. 初识数据"></a>2.1. 初识数据</h3><p>kaggle提供了2组数据：train.csv和test.csv，可以直接打开Excel看数据的样子，也可读入数据后print出来</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">train = pd.read_csv(<span class="string">'data/train.csv'</span>)</div><div class="line">test = pd.read_csv(<span class="string">'data/test.csv'</span>)</div><div class="line"><span class="keyword">print</span> train.head(<span class="number">6</span>)</div><div class="line"><span class="keyword">print</span> train.describe()</div></pre></td></tr></table></figure>
<p><img src="/img/kaggle/titanic/Figure1.png" alt="Alt text"><br>图 1</p>
<p>由数据可知提供的信息包含有PassengerId(乘客ID)，Survived(获救与否)，Pclass(舱位等级)，Name(姓名)，Sex(性别)，Age(年龄)，SibSp(船上兄弟姐妹数目)，Parch(船上兄弟姐妹数目)，Ticket(票号)，Fare(票价)，Cabin(船舱号)和Embarked(登船港口)。其中Survived代表的就是Y值，我们也知道看到数据是有缺失的，为了更好了解数据的完整度，我们可以用两种方法查看。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> train.info()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure2.png" class="[class names]" width="300" height="500">
<p>图 2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> test.insull.sum()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure3.png" class="[class names]" width="150" height="350">
<p>图 3</p>
<p>由图2我们可以知道train文档共有891组数据，其中Age，Cabin，Embarked这三个特征值有不同程度的数据缺失，且10项信息的数据类型也是一致的。图三告诉我们test中也有缺失信息</p>
<h3 id="2-2-缺失数据"><a href="#2-2-缺失数据" class="headerlink" title="2.2. 缺失数据"></a>2.2. 缺失数据</h3><p>缺失值处理一般采用两种方法：直接删除，数据补全。其中数据补全又分特殊值填充、平均值填充、众数填充、插值填充等。</p>
<h4 id="2-2-1-Age特征数据缺失处理"><a href="#2-2-1-Age特征数据缺失处理" class="headerlink" title="2.2.1. Age特征数据缺失处理"></a>2.2.1. Age特征数据缺失处理</h4><p>由图2可知Age数据类型是float64，缺失177个。数据缺失将近2成，直接删除会导致本来小的数据值更小不太可取，而且test里面Age数据也有缺失不可能删除。于是我这里选择了数据补全，在补全之前我们也可以画图看看train中Age特征的数据分布,也可调describe()函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</div><div class="line">age = train[<span class="string">'Age'</span>].dropna() <span class="comment">### 删除缺失数据</span></div><div class="line">plt.xlabel(<span class="string">'Age'</span>)</div><div class="line">plt.ylabel(<span class="string">'Num'</span>)</div><div class="line">plt.hist(age,<span class="number">20</span>) </div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure4.png" class="[class names]" width="400" height="250">
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> train[<span class="string">'Age'</span>].describe()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure5.png" class="[class names]" width="200" height="500">
<p>平均值是29，大多数人是20-40岁这个区间，因为缺失数有2成之多，假如统一补充平均值，可能会引起模型最后不小的偏差，这里我选择的了填补特殊值-10，年龄数据本身是不会有负数的，这里采用负数就是将其缺失作为一种特征值进行使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">train[<span class="string">'Age'</span>].fillna(value = <span class="number">-10</span>,inplace = <span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<h4 id="2-2-2-Cabin特征数据缺失处理"><a href="#2-2-2-Cabin特征数据缺失处理" class="headerlink" title="2.2.2. Cabin特征数据缺失处理"></a>2.2.2. Cabin特征数据缺失处理</h4><p>由图2可知Cabin船舱号的数据类型是object,缺失8成左右的数据，不可直接删除缺失改数据的样本，也不可能补充众数或平均值。这里有三个选择：填充特殊值表示船舱号为空，以有无船舱号作为新的特征，或者直接删除Cabin特征不参与模型学习。因为船舱号大部分数据缺失，在刚开始跑baseline时，可以直接不用这个特征，我这里选择以有无船舱号作为新的特征。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">train[<span class="string">'Cabin'</span>].fillna(value = <span class="string">'UN'</span>,inplace = <span class="keyword">True</span>)</div><div class="line">train[<span class="string">'have_Cabin'</span>] =  train[<span class="string">'Cabin'</span>].apply(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> x == <span class="string">'UN'</span> <span class="keyword">else</span> <span class="number">1</span>)</div><div class="line">train = train.drop(<span class="string">'Cabin'</span>, axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h4 id="2-2-3-Embarked数据缺失处理"><a href="#2-2-3-Embarked数据缺失处理" class="headerlink" title="2.2.3. Embarked数据缺失处理"></a>2.2.3. Embarked数据缺失处理</h4><p>Embarked代表乘客的登船港口，数据类型是object，train.csv只缺失2个且test.csv中无缺失，故这里可采取直接删除缺失该数据的样本或者填补众数的方法，对结果影响都不大。下面是采用填补众数的方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> train[<span class="string">'Embarked'</span>].describe()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure6.png" class="[class names]" width="225" height="280">
<p>由上可知有3个不同的登船港口，其中S港口人最多，故S为众数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">train[<span class="string">'Embarked'</span>].fillna(value = <span class="string">'S'</span>,inplace = <span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<p>现在train中所有所有缺失数据都已经处理完毕，我们可以再检查数据的完整度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> train.info()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure2.png" class="[class names]" width="300" height="500">
<h4 id="2-2-4-Fare数据缺失处理"><a href="#2-2-4-Fare数据缺失处理" class="headerlink" title="2.2.4. Fare数据缺失处理"></a>2.2.4. Fare数据缺失处理</h4><p>Fare缺失的数据只在test集里面存在，且只有两个，我这里采用了插值法处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">test[<span class="string">'Fare'</span>] = test[<span class="string">'Fare'</span>].interpolate()</div></pre></td></tr></table></figure>
<h2 id="3-特征与结果关联"><a href="#3-特征与结果关联" class="headerlink" title="3. 特征与结果关联"></a>3. 特征与结果关联</h2><p>每个乘客都有自己的姓名，Ticket，和PassengerIdID，虽然不同的姓氏可能有代表不同的权利等级或者隐藏亲属关系，但船舱和价位可以得出些信息且数据本身有给出乘客在船上亲朋好友的个数，故姓名和PassengerId这两个信息我暂且没有用上。</p>
<h3 id="3-1-Pclass"><a href="#3-1-Pclass" class="headerlink" title="3.1. Pclass"></a>3.1. Pclass</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> set(train[<span class="string">'Pclass'</span>])</div><div class="line"><span class="keyword">print</span> train[<span class="string">'Survived'</span>].corr(train[<span class="string">'Pclass'</span>]) <span class="comment">### 相关性</span></div><div class="line"></div><div class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line"><span class="number">-0.338481035961</span></div></pre></td></tr></table></figure>
<p>由上可知分1，2，3等座，且和Survived相关性是负相关(-0.34)，即一等座存活率高些，紧接是二等座。我们还可以画图看看具体的数目情况。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dead = train[train.Survived==<span class="number">0</span>].groupby(<span class="string">'Pclass'</span>)[<span class="string">'Survived'</span>].count()</div><div class="line">alive = train[train.Survived==<span class="number">1</span>].groupby(<span class="string">'Pclass'</span>)[<span class="string">'Survived'</span>].count()</div><div class="line">ax = plt.figure(figsize=(<span class="number">8</span>,<span class="number">4</span>)).add_subplot(<span class="number">111</span>)</div><div class="line">ax.bar([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], dead, color=<span class="string">'b'</span>, alpha=<span class="number">0.6</span>, label=<span class="string">'dead'</span>)</div><div class="line">ax.bar([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], alive, color=<span class="string">'g'</span>, bottom=dead, alpha=<span class="number">0.6</span>, label=<span class="string">'alive'</span>)</div><div class="line">ax.legend(fontsize=<span class="number">16</span>, loc=<span class="string">'best'</span>)</div><div class="line">ax.set_xticks([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</div><div class="line">ax.set_xticklabels([<span class="string">'Pclass1'</span>, <span class="string">'Pclass2'</span>, <span class="string">'Pclass3'</span>], size=<span class="number">15</span>)</div><div class="line">plt.ylabel(<span class="string">'Num'</span>, size = <span class="number">15</span>)</div><div class="line">ax.set_title(<span class="string">'Pclass &amp; Surveved'</span>, size=<span class="number">20</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure8.png" class="[class names]" width="400" height="600">
<p>由图可更直观看出三等座的存活率远远比不上其它，这说明这个特征对分类还是很有用处的。</p>
<h3 id="3-2-Sex"><a href="#3-2-Sex" class="headerlink" title="3.2. Sex"></a>3.2. Sex</h3><h4 id="3-2-1-Sex-amp-Survived"><a href="#3-2-1-Sex-amp-Survived" class="headerlink" title="3.2.1. Sex &amp; Survived"></a>3.2.1. Sex &amp; Survived</h4><p>我们同样可以观察下获救与否和性别的相关性，以及不同性别获救的人数直方图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">train[<span class="string">'is_male'</span>] = train[<span class="string">'Sex'</span>].apply(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x == <span class="string">'male'</span> <span class="keyword">else</span> <span class="number">0</span>)</div><div class="line">train = train.drop(<span class="string">'Sex'</span>, axis=<span class="number">1</span>)</div><div class="line"><span class="keyword">print</span> train[<span class="string">'Survived'</span>].corr(train[<span class="string">'is_male'</span>])</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">0.543351380658</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dead = train[train.Survived==<span class="number">0</span>].groupby(<span class="string">'is_male'</span>)[<span class="string">'Survived'</span>].count()</div><div class="line">alive = train[train.Survived==<span class="number">1</span>].groupby(<span class="string">'is_male'</span>)[<span class="string">'Survived'</span>].count()</div><div class="line">ax = plt.figure(figsize=(<span class="number">8</span>,<span class="number">4</span>)).add_subplot(<span class="number">111</span>)</div><div class="line">ax.bar([<span class="number">1</span>, <span class="number">2</span>], dead, color=<span class="string">'b'</span>, alpha=<span class="number">0.6</span>, label=<span class="string">'dead'</span>)</div><div class="line">ax.bar([<span class="number">1</span>, <span class="number">2</span>], alive, color=<span class="string">'g'</span>, bottom=dead, alpha=<span class="number">0.6</span>, label=<span class="string">'alive'</span>)</div><div class="line">ax.legend(fontsize=<span class="number">16</span>, loc=<span class="string">'best'</span>)</div><div class="line">ax.set_xticks([<span class="number">1</span>,<span class="number">2</span>])</div><div class="line">ax.set_xticklabels([<span class="string">'Female'</span>, <span class="string">'male'</span>], size=<span class="number">15</span>)</div><div class="line">plt.ylabel(<span class="string">'Num'</span>, size = <span class="number">15</span>)</div><div class="line">ax.set_title(<span class="string">'Sex &amp; Surveved'</span>, size=<span class="number">20</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure9.png" class="[class names]" width="400" height="600">
<p>由上可知相关性为0.54，女性的获救几率比男性大得多。</p>
<h4 id="3-2-2-Pclass-Sex-amp-Survived"><a href="#3-2-2-Pclass-Sex-amp-Survived" class="headerlink" title="3.2.2. Pclass, Sex &amp; Survived"></a>3.2.2. Pclass, Sex &amp; Survived</h4><p>下图中绿色代表获救代表，可以看出在一二等座的女性获救几率是很高的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ax = plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>)).add_subplot(<span class="number">111</span>)</div><div class="line">sns.violinplot(x=<span class="string">'is_male'</span>, y=<span class="string">'Pclass'</span>, hue=<span class="string">'Survived'</span>, data=train, split=<span class="keyword">True</span>)</div><div class="line">ax.set_xlabel(<span class="string">'Sex'</span>,size=<span class="number">20</span>)</div><div class="line">ax.set_ylabel(<span class="string">'Pclass'</span>,size=<span class="number">20</span>)</div><div class="line">ax.set_xticklabels([<span class="string">'Male'</span>,<span class="string">'Female'</span>], size=<span class="number">18</span>)</div><div class="line">ax.legend(fontsize=<span class="number">25</span>,loc=<span class="string">'best'</span>)</div><div class="line">ax.set_title(<span class="string">'Sex, Pclass &amp; Surveved'</span>, size=<span class="number">20</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure10.png" class="[class names]" width="600" height="800">
<h3 id="3-3-Age"><a href="#3-3-Age" class="headerlink" title="3.3. Age"></a>3.3. Age</h3><h4 id="3-3-1-Age-amp-Survived"><a href="#3-3-1-Age-amp-Survived" class="headerlink" title="3.3.1. Age &amp; Survived"></a>3.3.1. Age &amp; Survived</h4><p>前面年龄缺失数据已补全，接下来我们看看Age数据和获救与否的关系图, 根据图像来确定分组年龄界限(这里取了大约交点的位置来分组),在不同的年龄段获救几率不尽相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>,<span class="number">5</span>))</div><div class="line">ax.set_title(<span class="string">'Age &amp; Survived'</span>)</div><div class="line">k1 = sns.distplot(train[train.Survived==<span class="number">0</span>].Age,  hist = <span class="keyword">False</span>, color=<span class="string">'b'</span>, ax=ax, label=<span class="string">'dead'</span>)</div><div class="line">k2 = sns.distplot(train[train.Survived==<span class="number">1</span>].Age, hist = <span class="keyword">False</span>, color=<span class="string">'y'</span>, ax=ax, label=<span class="string">'alive'</span>)</div><div class="line">ax.set_xlabel(<span class="string">'Age'</span>)</div><div class="line">ax.legend(fontsize=<span class="number">16</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure11.png" class="[class names]" width="500" height="650">
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">age_map</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">if</span> x &lt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    <span class="keyword">elif</span> x &lt; <span class="number">16</span> <span class="keyword">and</span> x &gt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">2</span></div><div class="line">    <span class="keyword">elif</span> x &lt; <span class="number">27</span> <span class="keyword">and</span> x &gt; <span class="number">15</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">3</span></div><div class="line">    <span class="keyword">elif</span> x &lt; <span class="number">58</span> <span class="keyword">and</span> x &gt; <span class="number">26</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">4</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">5</span>          </div><div class="line">train[<span class="string">'Age_map'</span>] = train[<span class="string">'Age'</span>].apply(<span class="keyword">lambda</span> x: age_map(x))</div><div class="line">train = train.drop(<span class="string">'Age'</span>, axis=<span class="number">1</span>)</div><div class="line">dead = train[train.Survived==<span class="number">0</span>].groupby(<span class="string">'Age_map'</span>)[<span class="string">'Survived'</span>].count()</div><div class="line">alive = train[train.Survived==<span class="number">1</span>].groupby(<span class="string">'Age_map'</span>)[<span class="string">'Survived'</span>].count()</div><div class="line">ax = plt.figure(figsize=(<span class="number">8</span>,<span class="number">4</span>)).add_subplot(<span class="number">111</span>)</div><div class="line">ax.bar([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], dead, color=<span class="string">'b'</span>, alpha=<span class="number">0.6</span>, label=<span class="string">'dead'</span>)</div><div class="line">ax.bar([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], alive, color=<span class="string">'g'</span>, bottom=dead, alpha=<span class="number">0.6</span>, label=<span class="string">'alive'</span>)</div><div class="line">ax.legend(fontsize=<span class="number">16</span>, loc=<span class="string">'best'</span>)</div><div class="line">ax.set_xticks([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</div><div class="line">ax.set_xticklabels([<span class="string">'Age1'</span>, <span class="string">'Age2'</span>, <span class="string">'Age3'</span>, <span class="string">'Age4'</span>, <span class="string">'Age5'</span>], size=<span class="number">15</span>)</div><div class="line">plt.ylabel(<span class="string">'Num'</span>, size = <span class="number">15</span>)</div><div class="line">ax.set_title(<span class="string">'Pclass &amp; Surveved'</span>, size=<span class="number">20</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure12.png" class="[class names]" width="400" height="600">
<h3 id="3-4-SibSp-amp-Parch"><a href="#3-4-SibSp-amp-Parch" class="headerlink" title="3.4. SibSp &amp; Parch"></a>3.4. SibSp &amp; Parch</h3><p>家属和朋友都是亲近的人所以这里我把他们都放在一起。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">train[<span class="string">'family&amp;friend'</span>] = train[<span class="string">'SibSp'</span>] + train[<span class="string">'Parch'</span>]</div><div class="line">train = train.drop([<span class="string">'SibSp'</span>, <span class="string">'Parch'</span>], axis=<span class="number">1</span>)</div><div class="line">train[<span class="string">'is_with_f'</span>] = train[<span class="string">'family&amp;friend'</span>].apply(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> x == <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span>)</div><div class="line"><span class="keyword">print</span> train[<span class="string">'Survived'</span>].corr(train[<span class="string">'family&amp;friend'</span>])</div><div class="line"><span class="keyword">print</span> train[<span class="string">'Survived'</span>].corr(train[<span class="string">'is_with_f'</span>])</div><div class="line"></div><div class="line"><span class="number">0.0166389892827</span></div><div class="line"><span class="number">0.2033670857</span></div></pre></td></tr></table></figure>
<p>可以看到Survived和乘客是否有亲朋好友的相关度比和亲朋好友的个数要更大所以我保留了train[‘is_with_f’]，删除了train[‘family&amp;friend’]，当然也许有朋友会想保留两个特征，这都没问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">train = train.drop([<span class="string">'family&amp;friend'</span>], axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h3 id="3-5-特征相关性"><a href="#3-5-特征相关性" class="headerlink" title="3.5. 特征相关性"></a>3.5. 特征相关性</h3><p>先把Embarked变为one_hot编码的。然后我们看看最后数据长什么样。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">train = train.get_dummies(train, prefix=[<span class="string">'is'</span>])</div><div class="line">train.head(<span class="number">5</span>)</div></pre></td></tr></table></figure>
<p><img src="/img/kaggle/titanic/Figure13.png" alt="Alt text"></p>
<p>最后我们可以总得看看特征之间的相关程度，我们可以直接调用函数查看数值，当然看热图的话会更直观。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line">matplotlib.use(<span class="string">'TkAgg'</span>)</div><div class="line"></div><div class="line">train_corr = train.corr()</div><div class="line">sns.set()</div><div class="line">f, ax = plt.subplots()</div><div class="line">sns.heatmap(train_corr,  ax = ax, annot = <span class="keyword">True</span>, linewidths=<span class="number">1</span>, square=<span class="keyword">True</span>, cmap=<span class="string">"Blues"</span>)</div><div class="line">ax.set_xticklabels(train_corr.index, size=<span class="number">10</span>)</div><div class="line">ax.set_yticklabels(train_corr.columns[::<span class="number">-1</span>], size=<span class="number">10</span>)</div><div class="line">ax.set_title(<span class="string">'all train feature corr'</span>, fontsize=<span class="number">20</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<img src="/img/kaggle/titanic/Figure14.png" class="[class names]" width="500" height="500">
<h2 id="4-模型"><a href="#4-模型" class="headerlink" title="4. 模型"></a>4. 模型</h2><p>模型的选择有很多，我这里先选择了随机森林。下面是我的源代码，后期还会再调参数以及用<br>ensemble。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding = utf-8</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line">matplotlib.use(<span class="string">'TkAgg'</span>)</div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</div><div class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> make_scorer, accuracy_score</div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">age_map</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">if</span> x &lt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    <span class="keyword">elif</span> x &lt; <span class="number">16</span> <span class="keyword">and</span> x &gt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">2</span></div><div class="line">    <span class="keyword">elif</span> x &lt; <span class="number">27</span> <span class="keyword">and</span> x &gt; <span class="number">15</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">3</span></div><div class="line">    <span class="keyword">elif</span> x &lt; <span class="number">58</span> <span class="keyword">and</span> x &gt; <span class="number">26</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">4</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">5</span> </div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_data</span><span class="params">(data)</span>:</span></div><div class="line">    data = data.drop(<span class="string">'PassengerId'</span>, axis=<span class="number">1</span>) </div><div class="line">    data = data.drop(<span class="string">'Name'</span>, axis=<span class="number">1</span>)</div><div class="line">    data = data.drop(<span class="string">'Ticket'</span>, axis=<span class="number">1</span>)</div><div class="line">     </div><div class="line">    data[<span class="string">'Age'</span>].fillna(value = <span class="number">-10</span>,inplace = <span class="keyword">True</span>)</div><div class="line">    data[<span class="string">'Age_map'</span>] = data[<span class="string">'Age'</span>].apply(<span class="keyword">lambda</span> x: age_map(x))</div><div class="line">    data = data.drop(<span class="string">'Age'</span>, axis=<span class="number">1</span>)</div><div class="line">    </div><div class="line">    data[<span class="string">'Cabin'</span>].fillna(value = <span class="string">'UN'</span>,inplace = <span class="keyword">True</span>)</div><div class="line">    data[<span class="string">'have_Cabin'</span>] =  data[<span class="string">'Cabin'</span>].apply(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> x == <span class="string">'UN'</span> <span class="keyword">else</span> <span class="number">1</span>)</div><div class="line">    data = data.drop(<span class="string">'Cabin'</span>, axis=<span class="number">1</span>)   </div><div class="line"></div><div class="line">    data[<span class="string">'is_male'</span>] = data[<span class="string">'Sex'</span>].apply(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x == <span class="string">'male'</span> <span class="keyword">else</span> <span class="number">0</span>)</div><div class="line">    data = data.drop(<span class="string">'Sex'</span>, axis=<span class="number">1</span>)    </div><div class="line"></div><div class="line">    data[<span class="string">'family&amp;friend'</span>] = data[<span class="string">'SibSp'</span>] + data[<span class="string">'Parch'</span>]</div><div class="line">    data = data.drop([<span class="string">'SibSp'</span>, <span class="string">'Parch'</span>], axis=<span class="number">1</span>)</div><div class="line">    data[<span class="string">'is_with_f'</span>] = data[<span class="string">'family&amp;friend'</span>].apply(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> x == <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span>)       </div><div class="line">    data = data.drop([<span class="string">'family&amp;friend'</span>], axis=<span class="number">1</span>)</div><div class="line">    </div><div class="line">    data[<span class="string">'Fare'</span>] = data[<span class="string">'Fare'</span>].interpolate()</div><div class="line">    data[<span class="string">'Embarked'</span>].fillna(value = <span class="string">'S'</span>,inplace = <span class="keyword">True</span>)</div><div class="line">    data = pd.get_dummies(data, prefix=[<span class="string">'is'</span>])</div><div class="line"></div><div class="line">    <span class="keyword">return</span> data</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_predict_result</span><span class="params">(ID, result)</span>:</span></div><div class="line">    submission = pd.DataFrame(&#123;<span class="string">"PassengerId"</span>: ID[<span class="string">"PassengerId"</span>],</div><div class="line">        <span class="string">"Survived"</span>: result &#125;)</div><div class="line">    submission.to_csv(<span class="string">'submission.csv'</span>, index = <span class="keyword">False</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">'save_result succ!!!'</span></div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">choose_parameter</span><span class="params">(model, X, Y)</span>:</span></div><div class="line">    para = &#123; <span class="string">'n_estimators'</span>: [<span class="number">10</span>,<span class="number">100</span>,<span class="number">300</span>,<span class="number">800</span>], </div><div class="line">             <span class="string">'max_features'</span>: [<span class="string">'log2'</span>, <span class="string">'sqrt'</span>,<span class="string">'auto'</span>], </div><div class="line">             <span class="string">'criterion'</span>: [<span class="string">'entropy'</span>, <span class="string">'gini'</span>],</div><div class="line">             <span class="string">'max_depth'</span>: [<span class="number">2</span>，<span class="number">6</span>, <span class="number">9</span>], </div><div class="line">             <span class="string">'min_samples_split'</span>: [<span class="number">5</span>，<span class="number">10</span>，<span class="number">20</span>, <span class="number">30</span>],</div><div class="line">             <span class="string">'min_samples_leaf'</span>: [<span class="number">10</span>, <span class="number">20</span>]</div><div class="line">            &#125;</div><div class="line">    scoring = make_scorer(accuracy_score)</div><div class="line">    grid_obj = GridSearchCV(model, para, scoring = scoring, n_jobs = <span class="number">4</span>, verbose = <span class="number">1</span>)</div><div class="line">    grid_obj = grid_obj.fit(X, Y.values.ravel())</div><div class="line">    best_model= grid_obj.best_estimator_</div><div class="line">    <span class="keyword">print</span> best_model</div><div class="line">    <span class="keyword">return</span> best_model</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    train = pd.read_csv(<span class="string">'train.csv'</span>)</div><div class="line">    test= pd.read_csv(<span class="string">'test.csv'</span>)</div><div class="line">    test_Y_ID = pd.read_csv(<span class="string">'gender_submission.csv'</span>)</div><div class="line">    </div><div class="line">    train_X, train_Y = clean_data(train).drop([<span class="string">'Survived'</span>], axis=<span class="number">1</span>), train[<span class="string">'Survived'</span>]</div><div class="line">    test_X, test_Y= clean_data(test), test_Y_ID[<span class="string">'Survived'</span>]</div><div class="line"></div><div class="line">    model = RandomForestClassifier()</div><div class="line">    model = choose_parameter(model, train_X, train_Y)</div><div class="line">    model.fit(train_X, train_Y)</div><div class="line">    predict_Y = model.predict(test_X)</div><div class="line">    </div><div class="line">    train_score = model.score(train_X, train_Y)</div><div class="line">    test_score = model.score(test_X, test_Y)</div><div class="line">    </div><div class="line">    <span class="keyword">print</span> train_score, test_score</div><div class="line">    save_predict_result(test_Y_ID, predict_Y)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/kaggle/" rel="tag"># kaggle</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017-12-15-nin/" rel="next" title="Network In Network">
                <i class="fa fa-chevron-left"></i> Network In Network
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="mofeiyu" />
          <p class="site-author-name" itemprop="name">mofeiyu</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/mofeiyu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-问题"><span class="nav-text">1. 问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-数据"><span class="nav-text">2. 数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-初识数据"><span class="nav-text">2.1. 初识数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-缺失数据"><span class="nav-text">2.2. 缺失数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-Age特征数据缺失处理"><span class="nav-text">2.2.1. Age特征数据缺失处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2-Cabin特征数据缺失处理"><span class="nav-text">2.2.2. Cabin特征数据缺失处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-3-Embarked数据缺失处理"><span class="nav-text">2.2.3. Embarked数据缺失处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-4-Fare数据缺失处理"><span class="nav-text">2.2.4. Fare数据缺失处理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-特征与结果关联"><span class="nav-text">3. 特征与结果关联</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-Pclass"><span class="nav-text">3.1. Pclass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-Sex"><span class="nav-text">3.2. Sex</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1-Sex-amp-Survived"><span class="nav-text">3.2.1. Sex & Survived</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2-Pclass-Sex-amp-Survived"><span class="nav-text">3.2.2. Pclass, Sex & Survived</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-Age"><span class="nav-text">3.3. Age</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-Age-amp-Survived"><span class="nav-text">3.3.1. Age & Survived</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-SibSp-amp-Parch"><span class="nav-text">3.4. SibSp & Parch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-特征相关性"><span class="nav-text">3.5. 特征相关性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-模型"><span class="nav-text">4. 模型</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">mofeiyu</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'mofeiyu';
      var disqus_identifier = 'kaggle_titanic/';

      var disqus_title = "Titanic Problem from Kaggel";


      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      
        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
            this.page.title = disqus_title;
        };
        run_disqus_script('embed.js');
      

    </script>
  









  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  


</body>
</html>
